<ui:composition template="/WEB-INF/templates/mainLayout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:comps="http://java.sun.com/jsf/composite/composites"
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="metadata">
        <f:metadata>
            <o:viewParam name="accession" value="#{geneView.queryAccession}"/>
            <f:event type="preRenderView" listener="#{geneView.init}"/>
        </f:metadata>
    </ui:define>
    <ui:define name="pageTitle">GOtrack</ui:define>
    <ui:define name="css">
        <h:outputStylesheet library="css" name="genes.css"/>
        <h:outputStylesheet library="css" name="gograph.css"/>
        <h:outputStylesheet library="css" name="tipsy.css"/>
    </ui:define>
    <ui:define name="js">
        <script type="text/javascript">
            googleAnalyticsTrackPageviewIfConfigured("/gotrack/genes");
        </script>
        <h:outputScript library="js" name="utility.js"/>

        <!-- Highcharts stuff -->
        <ui:include src="/WEB-INF/includes/highcharts-js.xhtml"/>

        <h:outputScript library="js" name="tipsy.js"/>
        <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <h:outputScript library="js" name="dagre-d3.min.js"/>

        <h:outputScript library="js" name="plotting.js"/>
        <h:outputScript library="js" name="gograph.js"/>
        <h:outputScript library="js" name="genes.js"/>
        <h:outputScript rendered="#{geneView.gene != null}">
            $(document).ready(function () {
                $('.loading').show();
                fetchData();
            });
        </h:outputScript>


    </ui:define>

    <ui:define name="left_right_layout">

        <p:layoutUnit id="right" position="east" size="40%" minSize="300"
                      header="Terms Ever Annotated" resizable="true" collapsible="true"
                      style="text-align:center" collapsed="#{geneView.gene == null}">
            <f:facet name="header">
                <h:outputText value="Terms Annotated in Selected Edition"/>
                <p:commandButton id="rightLayoutHelpBtn" value=""
                                 styleClass="no-value no-background fa-fix" icon="fa fa-question-circle" title="Help"
                                 type="button"/>
            </f:facet>
            <h:form id="rightForm" style="height:100%;">
                <p:dataTable id="funcTable"
                             widgetVar="funcTable"
                             var="termRow"
                             value="#{geneView.rightPanelTerms}"
                             scrollable="true"
                             style="margin-bottom:0"
                             styleClass="auto"
                             emptyMessage="No annotations found with given criteria"
                             filteredValue="#{geneView.rightPanelFilteredTerms}"
                             selection="#{geneView.rightPanelSelectedTerms}"
                             selectionMode="multiple"
                             rowKey="#{termRow.term.goId}"
                             scrollHeight="100%"
                             rowStyleClass="rightPanelRow-#{termRow.type}"
                             expandableRowGroups="true"
                             sortBy="#{termRow.type}">
                    <p:ajax event="rowDblselect" oncomplete="afterRowSelection();fetchTimeline();"/>
                    <p:ajax event="rowSelect" onstart="afterRowSelection();return false;"/>
                    <p:ajax event="rowUnselect" onstart="afterRowSelection();return false;"/>
                    <f:facet name="header">
                        <p:outputPanel id="headerPanel">
                            <h:outputText value="Edition "/>
                            <h:outputText value="#{geneView.rightPanelEdition.edition} "
                                          styleClass="#{not empty geneView.comparisons ? 'tag-0' : ''}"/>
                            <h:outputText rendered="#{not empty geneView.comparisons}" value="compared to: "/>
                            <p:repeat value="#{geneView.comparisons}" var="compareEdition" varStatus="loopStatus">
                                <h:outputText value="#{compareEdition.edition} "
                                              styleClass="tag-#{loopStatus.index + 1}"/>
                            </p:repeat>
                        </p:outputPanel>
                        <p:commandButton id="toggler" type="button" value="Columns" icon="ui-icon-calculator"
                                         style="display:none;"/>
                        <p:columnToggler widgetVar="colToggler" datasource="funcTable" trigger="toggler"/>
                    </f:facet>
                    <p:headerRow>
                        <p:column colspan="5">
                            <h:outputText value="#{termRow.type.label}"/>
                        </p:column>
                    </p:headerRow>

                    <p:column style="width:25px" styleClass="fixed">
                        <p:rowToggler/>
                    </p:column>
                    <p:column headerText="Tags" filterBy="#{termRow.inSet}" filterFunction="#{geneView.filterByBitSet}"
                              visible="#{not empty geneView.comparisons}" style="width:80px;" styleClass="fixed">
                        <f:facet name="filter">
                            <p:selectManyButton id="tagFilter" onchange="PF('funcTable').filter()"
                                                style="font-size: #{geneView.comparisons.size() > 1 ? 60 : 75}%"
                                                styleClass="selectButtonFA">
                                <!-- FA icon added through CSS -->
                                <c:forEach begin="0" end="#{geneView.comparisons.size()}" var="i">
                                    <f:selectItem itemLabel="" itemValue="#{i}"/>
                                </c:forEach>
                            </p:selectManyButton>
                        </f:facet>
                        <c:forEach begin="0" end="#{geneView.comparisons.size()}" var="i">
                            <p:outputPanel rendered="#{termRow.inSet.get(i)}" styleClass="inline">
                                <i class="fa fa-tag tag-#{i}" style="margin-right: 5px;"/>
                            </p:outputPanel>
                        </c:forEach>
                    </p:column>
                    <p:column filterBy="#{termRow.term.goId}" filterMatchMode="contains"
                              headerText="Id" style="width:120px" styleClass="fixed">
                        <p:commandLink actionListener="#{geneView.fetchTermGraph(termRow.term)}"
                                       oncomplete="PF('graphDlgWdg').show();handleFetchGraphDialog(xhr, status, args);">
                            <i class="fa fa-sitemap emphasize-hover" style="margin-right: 5px;"/>
                        </p:commandLink>
                        <p:link value="#{termRow.term.goId}" outcome="terms" target="_blank">
                            <f:param name="query" value="#{termRow.term.goId}"/>
                        </p:link>
                    </p:column>
                    <p:column filterBy="#{termRow.term.aspect}" filterMatchMode="in"
                              headerText="Aspect" style="width:155px;" styleClass="fixed">
                        <f:facet name="filter">
                            <p:selectManyButton
                                    onchange="PF('funcTable').filter()"
                                    style="font-size: 75%" converter="omnifaces.GenericEnumConverter">
                                <f:selectItems value="#{cache.aspects}"
                                               var="aspect" itemValue="#{aspect}" itemLabel="#{aspect}"/>
                            </p:selectManyButton>
                        </f:facet>
                        <h:outputText value="#{termRow.term.aspect.label}"/>
                    </p:column>
                    <p:column filterBy="#{termRow.term.name}" filterMatchMode="contains"
                              headerText="Name" styleClass="auto">
                        <h:outputText value="#{termRow.term.name}"/>
                    </p:column>

                    <p:rowExpansion>
                        <comps:annotationTable value="#{termRow.annotations}" id="annotationRowExpansion"/>
                    </p:rowExpansion>

                    <f:facet name="footer">
                        <p:commandButton icon="ui-icon-search" widgetVar="viewTermsWdg"
                                         value="View Annotation History" oncomplete="fetchTimeline()"/>
                        <p:commandButton icon="fa fa-sitemap" widgetVar="viewGOGraphWdg" value="View GO Graph"
                                         actionListener="#{geneView.fetchTermGraphFromSelected()}"
                                         oncomplete="PF('graphDlgWdg').show();handleFetchGraphDialog(xhr, status, args);"/>
                        <!--<p:commandButton icon="fa fa-filter" widgetVar="filterWdg" value="Highlight Editions"-->
                        <!--actionListener="#{geneView.fetchEditionsForSelectedTerms()}"-->
                        <!--oncomplete="handleFetchEditionsForSelectedTerms(xhr, status, args);"/>-->
                    </f:facet>
                </p:dataTable>
            </h:form>
        </p:layoutUnit>
    </ui:define>

    <ui:define name="center_layout">
        <p:outputPanel rendered="#{geneView.gene != null}">
            <div id="page-title">
                <h1><a href="http://www.uniprot.org/uniprot/#{geneView.gene.accession.accession}"
                       target="_blank">#{geneView.gene.symbol}</a> -
                    #{geneView.gene.species.scientificName}</h1>
                <h2>#{geneView.gene.name}</h2>
                <h3><ui:repeat
                        value="#{geneView.gene.synonyms.toArray()}"
                        var="syn" varStatus="loop">
                    #{syn}#{!loop.last ? ', ' : ''}
                </ui:repeat></h3>

            </div>
            <p:separator style="max-width:400px"/>
            <h:form id="centerTabViewForm">
                <p:tabView id="centerTabView" widgetVar="centerTabWdg" onTabShow="tabShowed(index)">
                    <p:tab>
                        <f:facet name='title'>
                            <h:outputText value="Annotation "/>
                            <p:commandButton id="annotationTabHelpBtn" value=""
                                             styleClass="no-value no-background fa-fix" icon="fa fa-question-circle"
                                             title="Help"
                                             type="button"/>
                        </f:facet>
                        <div id="loading-spinner-annotation" class="loading" style="display: none;"/>
                        <div id="hc_annotation_container" style="width: 100%; height: 600px;"/>
                    </p:tab>
                    <p:tab>
                        <f:facet name='title'>
                            <h:outputText value="Similarity "/>
                            <p:commandButton id="similarityTabHelpBtn" value=""
                                             styleClass="no-value no-background fa-fix" icon="fa fa-question-circle"
                                             title="Help"
                                             type="button"/>
                        </f:facet>
                        <div id="loading-spinner-similarity" class="loading" style="display: none;"/>
                        <div id="hc_similarity_container" style="width: 100%; height: 600px;"/>
                    </p:tab>
                    <p:tab>
                        <f:facet name='title'>
                            <h:outputText value="Multifunctionality "/>
                            <p:commandButton id="multifunctionalityTabHelpBtn" value=""
                                             styleClass="no-value no-background fa-fix" icon="fa fa-question-circle"
                                             title="Help"
                                             type="button"/>
                        </f:facet>
                        <div id="loading-spinner-multifunctionality" class="loading" style="display: none;"/>
                        <div id="hc_multi_container" style="width: 100%; height: 600px;"/>
                    </p:tab>

                </p:tabView>
            </h:form>


        </p:outputPanel>
        <p:outputPanel rendered="#{geneView.gene == null}">
            <h:form>
                <h3 style="text-align: center;">Track a Gene</h3>
                <p:panelGrid style="margin-bottom:10px" cellpadding="5" styleClass="geneSearchTable no-border">
                    <p:row>
                        <p:column>
                            <h:outputText value="Select the species of interest: "/>
                        </p:column>
                        <p:column>
                            <p:selectOneMenu id="selectspecies" converter="speciesConverter"
                                             value="#{sessionManager.species}" style="margin-right:5px;">
                                <p:ajax event="change" process="@this"/>
                                <f:selectItems value="#{cache.speciesList}" var="spec"
                                               itemValue="#{spec}" itemLabel="#{spec.commonName}"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <h:outputText value="Write the gene symbol to visualize: "/>
                        </p:column>
                        <p:column>
                            <p:autoComplete id="geneInput" value="#{geneSearchView.queryGene}"
                                            style="margin-right:8px;"
                                            completeMethod="#{geneSearchView.complete}" queryDelay="600"
                                            minQueryLength="2" forceSelection="true" maxResults="10"
                                            label="ID"
                                            emptyMessage="No gene suggestions available, please try again."
                                            converter="geneConverter"
                                            var="gene"
                                            itemLabel="#{gene.selectedGene.symbol}"
                                            itemValue="#{gene.selectedGene}"
                                            groupBy="#{gene.level.label}">
                                <p:column>
                                    <h:outputText value="#{gene.selectedGene.symbol} - #{gene.selectedGene.name}"/>
                                </p:column>
                            </p:autoComplete>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="2">
                            <p:commandButton type="submit" value="Go"
                                             action="#{geneSearchView.go}"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </h:form>

        </p:outputPanel>
    </ui:define>
    <ui:define name="dialogs">
        <h:form>
            <p:remoteCommand name="fetchData"
                             oncomplete="handleFetchData(xhr, status, args);fetchCharts();"
                             update=":rightForm"
                             actionListener="#{geneView.fetchData()}"/>
            <p:remoteCommand name="fetchAnnotationChart" async="true"
                             oncomplete="handleFetchAnnotationChart(xhr, status, args);"
                             actionListener="#{geneView.fetchAnnotationChart()}"/>
            <p:remoteCommand name="fetchSimilarityChart" async="true"
                             oncomplete="handleFetchSimilarityChart(xhr, status, args);"
                             actionListener="#{geneView.fetchJaccardChart()}"/>
            <p:remoteCommand name="fetchMultiChart" async="true"
                             oncomplete="handleFetchMultiChart(xhr, status, args);"
                             actionListener="#{geneView.fetchMultifunctionalityChart()}"/>

            <p:remoteCommand name="fetchTimeline"
                             oncomplete="PF('timelineDlgWdg').show();handleFetchTimeline(xhr, status, args);"
                             actionListener="#{geneView.fetchTimeline()}"/>

            <p:remoteCommand name="fetchAnnotationPointData"
                             process="@this"
                             update=":rightForm:funcTable:headerPanel"
                             oncomplete="PF('funcTable').filter()"
                             actionListener="#{geneView.fetchAnnotationPointData}"/>
            <p:remoteCommand name="fetchAnnotationComparisonData"
                             process="@this"
                             update=":rightForm:funcTable:tagFilter, :rightForm:funcTable:headerPanel"
                             oncomplete="PF('funcTable').filter()"
                             actionListener="#{geneView.fetchAnnotationComparisonData()}"/>
            <p:remoteCommand name="addAnnotationComparisonData"
                             process="@this"
                             update=":rightForm:funcTable:tagFilter, :rightForm:funcTable:headerPanel"
                             oncomplete="PF('funcTable').filter()"
                             actionListener="#{geneView.addAnnotationComparisonData()}"/>

            <p:remoteCommand name="fetchTimelinePointData"
                             update=":viewAnnotationsDlg"
                             oncomplete="showViewAnnotationsDlg();"
                             action="#{geneView.fetchTimelinePointData()}"/>

            <p:remoteCommand name="fetchGraph"
                             oncomplete="PF('graphDlgWdg').show();handleFetchGraphDialog(xhr, status, args);"
                             actionListener="#{geneView.fetchTermGraph}"/>


        </h:form>

        <p:dialog id="graphDlg"
                  header="Ancestor Chart"
                  widgetVar="graphDlgWdg"
                  modal="false"
                  showEffect="fade"
                  hideEffect="fade"
                  resizable="false"
                  height="600px;"
                  width="800px;"
                  style="max-width:80%;max-height:80%;"
                  closeOnEscape="true"
        >
            <svg id="dagDialog" height="500" width="700"/>
        </p:dialog>

        <p:dialog id="timelineDlg" widgetVar="timelineDlgWdg" modal="true" showEffect="fade"
                  hideEffect="fade" height="800" width="1200"
                  fitViewport="true" closeOnEscape="true" maximizable="true"
                  onHide="timelineDlgHide();" onShow="">
            <f:facet name="header">
                <p:commandButton id="timelineHelpBtn" value=""
                                 styleClass="no-value no-background fa-fix" icon="fa fa-question-circle" title="Help"
                                 type="button"/>
            </f:facet>
            <!-- return false so that the ajax request is not executed. -->
            <p:ajax event="maximize"
                    onstart="timelineDlgResize();return false;"/>
            <p:ajax event="restoreMaximize"
                    onstart="timelineDlgResize();return false;"/>
            <div id="hc_timeline_container" style="width: 100%; height: 100%;"/>

        </p:dialog>

        <p:dialog id="viewAnnotationsDlg"
                  widgetVar="viewAnnotationsDlgWdg" modal="false" showEffect="fade"
                  hideEffect="fade" width="900"
                  fitViewport="true" closeOnEscape="true">
            <h:form id="viewAnnotationsForm">
                <comps:annotationTable value="#{geneView.viewAnnotations}" id="annotationsDlgTable"/>
            </h:form>
        </p:dialog>

        <p:overlayPanel for=":centerTabViewForm:centerTabView:annotationTabHelpBtn" hideEffect="fade"
                        style="width:600px;text-align:left;">
            <div class="overlay-help">
            <h3 style="margin-top: 0;">Description:</h3>
            <p>The
                <b>annotation plot</b> shows distinct counts of both direct and inferred GO annotations associated with this gene.
                A distinct annotation is defined as being both unique in GO Term and Evidence.</p>
            <h3>Legend Descriptions:</h3>
            <p><span style="color:#2bce48;">Direct Annotation Count</span>: Distinct count of directly applied annotations.</p>
            <p>
                <span style="color:#0075dc;">Inferred Annotation Count</span>: Distinct count of directly applied annotations as well as their GO ancestors.
                <i>Example: A gene directly annotated with <a target="_blank" class="underline"
                                                              href="http://www.ebi.ac.uk/QuickGO/GTerm?id=GO:0033058">directional locomotion</a> is also implicitly annotated with its parents (<a
                        target="_blank" class="underline"
                        href="http://www.ebi.ac.uk/QuickGO/GTerm?id=GO:0040011">locomotion</a>).</i></p>
            <h3>Controls:</h3>
            <p><b>&lt;Click&gt;</b> any edition to view the annotations at that point in time in the right panel.</p>
            <p><b>&lt;Ctrl/Command&gt; + &lt;Click&gt;</b> any edition to compare the annotations at that point in time to the currently selected edition.
                This is done through coloured tags on each GO annotation. If a tag is present it means the annotation existed in some form in the edition that colour represents.</p>
            <p><b>&lt;Ctrl/Command&gt; + &lt;Shift&gt; + &lt;Click&gt;</b> will let you compare up to four editions at once.</p>
            <p><b>&lt;Click&gt;</b> a legend item to toggle that series.</p>
            <p><b>&lt;Ctrl/Command&gt; + &lt;Click&gt;</b> a legend item to show only that series.</p>

            </div>
        </p:overlayPanel>
        <p:overlayPanel for=":centerTabViewForm:centerTabView:similarityTabHelpBtn" hideEffect="fade"
                        style="width:600px;text-align:left;">
            <div class="overlay-help">
                <h3 style="margin-top: 0;">Description:</h3>
                <p>The
                    <b>similarity plot</b> shows the semantic similarity of the set of annotated GO terms from previous dates as compared to the most current set.
                    Semantic similarity is measured using the Jaccard Index.</p>
                <h3>Legend Descriptions:</h3>
                <p><span style="color:#2bce48;">Direct Similarity</span>: Similarity of directly annotated GO terms.</p>
                <p><span style="color:#0075dc;">Inferred Similarity</span>: Similarity of directly annotated GO terms as well as their ancestors.</p>
                <h3>Controls:</h3>
                <p><b>&lt;Click&gt;</b> any edition to view the annotations at that point in time in the right panel.</p>
                <p><b>&lt;Ctrl/Command&gt; + &lt;Click&gt;</b> any edition to compare the annotations at that point in time to the currently selected edition.
                    This is done through coloured tags on each GO annotation. If a tag is present it means the annotation existed in some form in the edition that colour represents.</p>
                <p><b>&lt;Ctrl/Command&gt; + &lt;Shift&gt; + &lt;Click&gt;</b> will let you compare up to four editions at once.</p>
                <p><b>&lt;Click&gt;</b> a legend item to toggle that series.</p>
                <p><b>&lt;Ctrl/Command&gt; + &lt;Click&gt;</b> a legend item to show only that series.</p>
            </div>
        </p:overlayPanel>
        <p:overlayPanel for=":centerTabViewForm:centerTabView:multifunctionalityTabHelpBtn" hideEffect="fade"
                        style="width:600px;text-align:left;">
            <div class="overlay-help">
                <h3 style="margin-top: 0;">Description:</h3>
                <p>The <b>multifunctionality plot</b> shows the multifunctionality of the selected gene.
                    Gene multifunctionality is measured as per <a
                            href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0017258"
                            class="underline" target="_blank">Gillis J, Pavlidis P (2011) The Impact of Multifunctional Genes on "Guilt by Association" Analysis.</a></p>
                <h3>Legend Descriptions:</h3>
                <p><span style="color:#2bce48;">Multifunctionality</span>: A measure of the number of functions a gene is involved in. For a more precise definition, see <a
                        href="http://www.plosone.org/article/info%3Adoi%2F10.1371%2Fjournal.pone.0017258"
                        class="underline" target="_blank">Gillis and Pavlidis, 2011.</a></p>
                <h3>Controls:</h3>
                <p><b>&lt;Click&gt;</b> any edition to view the annotations at that point in time in the right panel.</p>
                <p><b>&lt;Ctrl/Command&gt; + &lt;Click&gt;</b> any edition to compare the annotations at that point in time to the currently selected edition.
                    This is done through coloured tags on each GO annotation. If a tag is present it means the annotation existed in some form in the edition that colour represents.</p>
                <p><b>&lt;Ctrl/Command&gt; + &lt;Shift&gt; + &lt;Click&gt;</b> will let you compare up to four editions at once.</p>
                <p><b>&lt;Click&gt;</b> a legend item to toggle that series.</p>
                <p><b>&lt;Ctrl/Command&gt; + &lt;Click&gt;</b> a legend item to show only that series.</p>
            </div>
        </p:overlayPanel>
        <!-- 				<p:overlayPanel for=":centerTabViewForm:centerTabView:lossgainTabHelpBtn" hideEffect="fade"
                            style="width:600px;text-align:left;">
                            <p>The <b>loss/gain plot</b> shows the total loss and gain of distinct GO terms between consecutive editions of GO Annotations.</p>
                            <p><b>Loss:</b> Number of GO terms that are <i>no longer annotated</i> to the gene since the previous edition.</p>
                            <p><b>Gain:</b> Number of GO terms that are <i>newly annotated</i> to the gene since the previous edition.</p>
                            <p><b>Direct vs Inferred:</b> Direct measures look only at those terms which are directly annotated to this gene. Inferred also includes the ancestors of said terms.</p>
                        </p:overlayPanel> -->
        <p:overlayPanel for="timelineHelpBtn" hideEffect="fade"
                        style="width:600px;text-align:left;">
            <p>The following is the <b>Evidence Timeline</b> of the selected GO terms.</p>
            <p>Each selected GO term has its own timeline where coloured bars show the existence of the term at that point in time. Different colours
                represent different evidence code categories.</p>
            <p>See the following for an explanation of Evidence Codes:</p>
            <p:lightBox>
                <h:outputLink value="/gotrack/javax.faces.resource/diag-evCodeFlowChartGood.png?ln=img"
                              title="Evidence Code Flow Chart">
                    <h:graphicImage library="img" width="100" height="56" name="diag-evCodeFlowChartGood.png"/>
                </h:outputLink>
            </p:lightBox>
        </p:overlayPanel>
        <p:overlayPanel for=":rightLayoutHelpBtn" hideEffect="fade"
                        style="width:600px;text-align:left;">
            <div class="overlay-help">
            <h3 style="margin-top: 0;">Description:</h3>
                <p>The following table shows all GO Terms that are annotated in the selected edition(s).</p>
                <h3>Controls:</h3>
                <p><b>&lt;Click&gt;</b> on leftmost column (<span class="ui-icon ui-icon-circle-triangle-e"></span>) to show the specific annotations associated with this term.</p>
                <p><b>&lt;Click&gt;</b> or <b>&lt;Ctrl/Command/Shift&gt; + &lt;Click&gt;</b> to select rows.</p>
                <p><b>&lt;Click&gt;</b> <p:commandButton icon="ui-icon-search" value="View Annotation History" type="button" disabled="true"/> to view the annotation history of the selected GO terms. Shows when these terms were annotated to this gene split by evidence code category.</p>
                <p><b>&lt;Click&gt;</b> <p:commandButton icon="fa fa-sitemap" value="View GO Graph" type="button" disabled="true"/> to view the ancestors graph of the selected GO terms.</p>
            </div>
        </p:overlayPanel>


    </ui:define>

</ui:composition>